<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<title>جدول بيانات مع بحث وباسورد</title>
<style>
  table {
    border-collapse: collapse;
    width: 100%;
    direction: rtl;
    font-family: Arial, sans-serif;
  }
  th, td {
    border: 1px solid #333;
    padding: 8px;
    text-align: center;
  }
  input[type="password"] {
    width: 100%;
    box-sizing: border-box;
  }
  #search {
    margin-bottom: 10px;
    width: 300px;
    padding: 6px;
    font-size: 16px;
  }
</style>
</head>
<body>

<input type="text" id="search" placeholder="ابحث بالاسم أو الكود..." />

<table id="dataTable">
  <thead>
    <tr>
      <th>الكود</th>
      <th>الاسم</th>
      <th>التاريخ</th>
      <th>الرصيد</th>
      <th>جروث (ربح/خسارة)</th>
      <th>كلمة المرور</th>
    </tr>
  </thead>
  <tbody>
    <!-- البيانات هنا -->
  </tbody>
</table>

<script>
  // بيانات افتراضية مع باسورد مرتبط بالكود
  const data = [
    { code: 'A001', name: 'مصطفى', date: '2025-05-01', balance: 1000, growth: '+5%', password: '' },
    { code: 'B002', name: 'علي', date: '2025-05-03', balance: 750, growth: '-3%', password: '' },
    { code: 'C003', name: 'سارة', date: '2025-05-05', balance: 1200, growth: '+8%', password: '' },
    { code: 'D004', name: 'ليلى', date: '2025-05-10', balance: 500, growth: '0%', password: '' },
    { code: 'E005', name: 'محمد', date: '2025-05-12', balance: 950, growth: '+2%', password: '' }
  ];

  const tbody = document.querySelector('#dataTable tbody');
  const searchInput = document.getElementById('search');

  // دالة لرسم الجدول
  function renderTable(filteredData) {
    tbody.innerHTML = '';
    filteredData.forEach(row => {
      const tr = document.createElement('tr');

      tr.innerHTML = `
        <td>${row.code}</td>
        <td>${row.name}</td>
        <td>${row.date}</td>
        <td>${row.balance}</td>
        <td>${row.growth}</td>
        <td><input type="password" placeholder="أدخل كلمة المرور" data-code="${row.code}" value="${row.password}" /></td>
      `;

      tbody.appendChild(tr);
    });
    attachPasswordListeners();
  }

  // ربط تغيير الباسورد بالكود
  function attachPasswordListeners() {
    const passwordInputs = document.querySelectorAll('input[type="password"]');
    passwordInputs.forEach(input => {
      input.addEventListener('input', (e) => {
        const code = e.target.getAttribute('data-code');
        const newPass = e.target.value;
        // تحديث الباسورد في الداتا بناء على الكود
        const index = data.findIndex(item => item.code === code);
        if (index !== -1) {
          data[index].password = newPass;
        }
      });
    });
  }

  // فلترة البيانات حسب البحث
  function filterData(query) {
    query = query.trim().toLowerCase();
    if (!query) return data;
    return data.filter(item => 
      item.code.toLowerCase().includes(query) || 
      item.name.toLowerCase().includes(query)
    );
  }

  searchInput.addEventListener('input', () => {
    const filtered = filterData(searchInput.value);
    renderTable(filtered);
  });

  // رسم الجدول لأول مرة
  renderTable(data);
</script>

</body>
</html>